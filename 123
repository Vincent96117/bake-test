<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>HUNTER PRO | 10æ—¥é‡åŒ–å›æ¸¬ç³»çµ±</title>
    <style>
        body { background: #000; color: #eee; font-family: 'Segoe UI', sans-serif; padding: 20px; font-size: 13px; }
        .win { background: #064e3b !important; } .loss { background: #7f1d1d !important; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #333; padding: 10px; text-align: center; }
        th { background: #1c1c1c; color: #f2a900; }
        .btn-run { background: #f2a900; color: #000; padding: 10px 25px; cursor: pointer; border: none; font-weight: bold; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸ¯ 12H é‡åŒ–å›æ¸¬ (08:00 è©•åˆ† â†’ 20:00 æ¼²è·Œ)</h1>
    <div id="status">æº–å‚™å°±ç·’ï¼Œè«‹é»æ“ŠæŒ‰éˆ•é–‹å§‹ã€‚</div><br>
    <button class="btn-run" onclick="startBacktest()">ğŸš€ åŸ·è¡Œ 10 æ—¥å›æ¸¬</button>
    <table id="bt-table">
        <thead>
            <tr><th>æ—¥æœŸ</th><th>å¹£ç¨®</th><th>08:00 è©•åˆ†</th><th>08:00 åƒ¹æ ¼</th><th>20:00 åƒ¹æ ¼</th><th>12H æ¼²è·Œå¹…</th></tr>
        </thead>
        <tbody id="bt-body"></tbody>
    </table>
<script>
    async function startBacktest() {
        const status = document.getElementById('status');
        const body = document.getElementById('bt-body');
        body.innerHTML = ''; status.innerText = "æ­£åœ¨å–å¾—ç†±é–€å¹£ç¨®...";
        const tRes = await fetch('https://fapi.binance.com/fapi/v1/ticker/24hr');
        const tData = await tRes.json();
        const topSymbols = tData.filter(d => d.symbol.endsWith('USDT')).sort((a, b) => b.quoteVolume - a.quoteVolume).slice(0, 40).map(d => d.symbol);
        for (let i = 1; i <= 10; i++) {
            let d = new Date(); d.setDate(d.getDate() - i);
            status.innerText = `æ­£åœ¨åˆ†æ ${d.toLocaleDateString()} ...`;
            for (let s of topSymbols) {
                try {
                    let start = new Date(d.setHours(8, 0, 0, 0)).getTime();
                    let res = await fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${s}&interval=1h&startTime=${start}&limit=13`);
                    let k = await res.json();
                    if (k.length >= 12) {
                        let open = parseFloat(k[0][1]), close = parseFloat(k[12][4]), vol = parseFloat(k[0][7]);
                        let range = ((parseFloat(k[0][2]) - parseFloat(k[0][3])) / parseFloat(k[0][3])) * 100;
                        let score = (vol > 8000000) ? Math.min(100, Math.round(range * 6 + 35)) : 0;
                        if (score >= 45) {
                            let diff = ((close - open) / open * 100).toFixed(2);
                            let rowClass = diff >= 3 ? 'win' : (diff <= -3 ? 'loss' : '');
                            body.insertAdjacentHTML('beforeend', `<tr class="${rowClass}"><td>${d.toLocaleDateString()}</td><td>${s.replace('USDT','')}</td><td>${score}</td><td>${open}</td><td>${close}</td><td>${diff}%</td></tr>`);
                        }
                    }
                } catch(e){}
            }
            await new Promise(r => setTimeout(r, 300));
        }
        status.innerText = "âœ… å›æ¸¬å®Œæˆï¼";
    }
</script>
</body>
</html>
