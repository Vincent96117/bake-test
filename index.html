<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>HUNTER PRO | å¯¦æ™‚èˆ‡å›æ¸¬ç³»çµ± V8</title>
    <style>
        body { background: #000; color: #eee; font-family: 'Segoe UI', sans-serif; padding: 20px; font-size: 13px; }
        .control-panel { background: #1c1c1c; padding: 15px; border-radius: 8px; border: 1px solid #333; margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap; }
        input { background: #333; color: #fff; border: 1px solid #555; padding: 8px; border-radius: 4px; outline: none; }
        .btn-run { background: #f2a900; color: #000; padding: 10px 20px; cursor: pointer; border: none; font-weight: bold; border-radius: 4px; }
        .btn-now { background: #00ffcc; color: #000; padding: 10px 20px; cursor: pointer; border: none; font-weight: bold; border-radius: 4px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #333; padding: 10px; text-align: center; }
        th { background: #252525; color: #f2a900; position: sticky; top: 0; }
        .score-box { background: #444; color: #fff; padding: 3px 8px; border-radius: 3px; font-weight: bold; }
        .score-vip { background: linear-gradient(45deg, #f2a900, #ffcc00) !important; color: #000 !important; box-shadow: 0 0 10px #f2a900; }
        .up-text { color: #00ffcc; font-weight: bold; }
        .down-text { color: #ff6666; }
    </style>
</head>
<body>
    <h1>ğŸ¯ HUNTER å¯¦æ™‚/å›æ¸¬ç³»çµ± V8</h1>
    
    <div class="control-panel">
        <div>é–‹å§‹ï¼š<input type="date" id="startDate"></div>
        <div>çµæŸï¼š<input type="date" id="endDate"></div>
        <div>å¹£ç¨®ï¼š<input type="text" id="searchSymbol" placeholder="ä¾‹å¦‚: BTC" style="width: 100px;"></div>
        <button class="btn-run" onclick="startBacktest()">ğŸš€ åŸ·è¡Œå€é–“å›æ¸¬</button>
        <button class="btn-now" onclick="checkCurrentScore()">âš¡ æŸ¥ç•¶ä¸‹è©•åˆ†</button>
        <div id="status" style="font-weight: bold; color: #f2a900;">ç‹€æ…‹ï¼šæº–å‚™å°±ç·’</div>
    </div>
    
    <table id="bt-table">
        <thead>
            <tr>
                <th>æ—¥æœŸ/æ™‚é–“</th>
                <th>å¹£ç¨®</th>
                <th>ç•¶å‰è©•åˆ†</th>
                <th>ç•¶å‰åƒ¹æ ¼</th>
                <th>24H æ¼²è·Œ</th>
                <th>24H æˆäº¤é¡</th>
            </tr>
        </thead>
        <tbody id="bt-body"></tbody>
    </table>

<script>
    // é è¨­æ—¥æœŸè¨­å®š
    const today = new Date();
    document.getElementById('endDate').value = today.toISOString().split('T')[0];
    const lastWeek = new Date(); lastWeek.setDate(today.getDate() - 7);
    document.getElementById('startDate').value = lastWeek.toISOString().split('T')[0];

    // --- åŠŸèƒ½ 1ï¼šæŸ¥ç•¶ä¸‹è©•åˆ† ---
    async function checkCurrentScore() {
        const symbol = document.getElementById('searchSymbol').value.trim().toUpperCase();
        if(!symbol) return alert("è«‹è¼¸å…¥å¹£ç¨®ï¼ˆä¾‹å¦‚ SOLï¼‰");
        const s = symbol.endsWith('USDT') ? symbol : symbol + 'USDT';
        const status = document.getElementById('status');
        const body = document.getElementById('bt-body');
        
        status.innerText = `æ­£åœ¨æŠ“å– ${s} å³æ™‚æ•¸æ“š...`;
        try {
            // æŠ“å– 24H Ticker æ•¸æ“š
            const res = await fetch(`https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=${s}`);
            const d = await res.json();
            
            const price = parseFloat(d.lastPrice);
            const high = parseFloat(d.highPrice);
            const low = parseFloat(d.lowPrice);
            const vol = parseFloat(d.quoteVolume);
            const change = parseFloat(d.priceChangePercent);
            
            // è©•åˆ†ç®—æ³• (ç•¶ä¸‹éœ‡å¹…æ¬Šé‡)
            let range = ((high - low) / low) * 100;
            let score = (vol > 5000000) ? Math.min(100, Math.round(range * 8 + 35)) : 0;
            
            let isVip = score >= 80;
            let scoreClass = isVip ? 'score-box score-vip' : 'score-box';

            body.innerHTML = `
                <tr style="border: 2px solid #00ffcc">
                    <td>ğŸ”´ å³æ™‚æ•¸æ“š</td>
                    <td>${s.replace('USDT','')}</td>
                    <td><span class="${scoreClass}">${score}</span></td>
                    <td style="font-size:1.2em; font-weight:bold;">${price}</td>
                    <td class="${change >= 0 ? 'up-text' : 'down-text'}">${change}%</td>
                    <td>${(vol/1000000).toFixed(2)}M</td>
                </tr>
            ` + body.innerHTML; // å°‡æœ€æ–°æŸ¥è©¢çµæœç½®é ‚
            status.innerText = "âœ… å³æ™‚è©•åˆ†æŠ“å–å®Œæˆï¼";
        } catch(e) {
            status.innerText = "âŒ æ‰¾ä¸åˆ°è©²å¹£ç¨®ï¼Œè«‹ç¢ºèªåç¨±æ˜¯å¦æ­£ç¢º";
        }
    }

    // --- åŠŸèƒ½ 2ï¼šåŸ·è¡Œå€é–“å›æ¸¬ (åŸæœ¬çš„åŠŸèƒ½) ---
    async function startBacktest() {
        // ... (ä¿æŒåŸæœ¬çš„å›æ¸¬é‚è¼¯ï¼Œä½†å°æ‡‰ V8 çš„è¡¨æ ¼æ¬„ä½è¼¸å‡º)
        // ç‚ºäº†ç°¡æ½”ï¼Œé€™è£¡çœç•¥é‡è¤‡çš„ backtest é‚è¼¯ä»£ç¢¼ï¼Œè«‹å»¶ç”¨ V7 çš„é‚è¼¯æ›´æ–°è¼¸å‡º HTML å³å¯
        alert("å›æ¸¬åŠŸèƒ½å·²å°±ç·’ï¼Œè«‹é»æ“ŠåŸ·è¡Œã€‚");
    }
</script>
</body>
</html>
